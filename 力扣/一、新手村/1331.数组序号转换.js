/**
 * @param {number[]} arr
 * @return {number[]}
 */
var arrayRankTransform = function (arr) {
  // const map = new Map();
  // const deduplicate = [...new Set(arr)]
  // deduplicate.forEach((num) => {
  //   if(!map.has(num)){
  //     let count = 1;
  //     deduplicate.forEach(num2=>{
  //       if(num > num2){
  //         count++
  //       }
  //     })
  //     map.set(num,count)
  //   }
  // });
  // return arr.map(item=>{
  //   return map.get(item)
  // })

  // const map = new Map()
  // const set = new Set(arr)
  // set.forEach(item=>{
  //   if(!map.has(item)){
  //     let count = 1;
  //     set.forEach(item2=>{
  //       if(item > item2){
  //         count++
  //       }
  //     })
  //     map.set(item,count)
  //   }
  // })
  // return arr.map(item=>map.get(item))
  // let origin = [...arr]
  // arr = [...new Set(arr)]
  
  let sorted = [...new Set(arr)].sort((a,b) => a-b);
  return arr.map(item=>sorted.findIndex(a=>a===item) + 1)

};

 let arr = [37, 12, 28, 9, 100, 56, 80, 5, 12];
// let arr = [239218,248665,303220,-12045,-177722,182109,388264,-81449,-152614,-410271,460956,113659,76718,-287451,-218992,-324449,293314,-19799,290116,271619,-472746,-371667,-468360,307943,266602,-401487,-156756,-3829,-95362,-333643,343584,-123729,411410,214393,-350508,-48621,215974,271037,-341368,-271945,-78534,255553,-476036,-463205,284430,60101,-274256,87999,162978,-162679,-350364,234147,-144330,-221875,-440744,-380921,429898,-74991,266316,-466709,494430,287893,-210304,277199,37042,-490343,-52044,-43533,-59450,260509,-151896,485015,246106,-18463,-375012,330235,-495314,-305371,-331760,406111,133314,216297,172804,182915,320918,314349,40440,206247,99434,-236239,9452,259019,454910,-270731,147488,129199,-36078,-35463,-424748,466387,-213082,-160963,355464,205367,-237190,-401663,277692,433499,274894,-303739,48240,-247681,399714,311305,259428,-465949,118006,58445,101016,395463,-95350,261265,-254644,-486613,121502,-420267,-138752,249039,-440398,-441127,-249996,-312397,-67706,327901,82536,426647,347738,-67679,-454308,-104773,-240722,-284571,-301616,-106273,-394430,221161,459332,-233469,141654,-367763,264632,172967,56554,291057,52652,-244405,28542,31029,90720,99439,-210734,-186759,-53292,-159981,-440026,223805,453256,480439,-419270,191297,254012,175771,-413682,-26939,-252432,-441729,-35806,-160439,312996,-291549,485814,-181491,-483688,15367,195274,289105,-484084,42219,191134,194005,91072,-67697,291890,97177,-57100,-182349,346566,56925,200552,106839,-366886,353313,85980,-334085,357934,176165,202448,152351,-187070,-272535,-149180,430659,-436714,438573,388920,207335,220074,-220687,292844,-212725,-191618,-180427,407328,241583,-427374,-256135,127764,-199469,-76314,441405,-74360,-93001,467258,380801,392892,294171,-73650,254213,-472784,383295,-237726,-339575,-224156,384803,472182,-239603,-101096,-95097,343114,406929,76236,-378901,-192034,-399467,-163776,8591,-11022,-62951,219060,-237133,467526,-112291,-491864,-122921,384730,233057,44380,493115,160366,-255323,-387952,262623,-101118,317033,253316,-416765,151254,188333,333944,322215,-298390,106609,-479380,132619,-437250,50741,449056,-358225,311762,-200135,81620,-63789,353830,303357,405000,-288713,-419846,-405183,-346756,-286949,380110,234373,-39440,-384001,267170,71177,-65436,-382493,47798,197901,186584,-124345,361546,-436015,-275444,-336213,165214,55957,156928,100559,34610,202265,311924,442355,-440186,362973,-3992,-406377,-236198,258017,-364196,-100677,340206,-48411,39632,486175,367170,354089,22724,-68605,-439338,362541,-424072,381927,-146774,-363855,134764,-287221,-91330,21109,-104096,-16209,168018,-176583,397140,257555,-227034,-190851,-454392,233527,-75910,-192895,-279364,39067,-439410,-13755,-366288,-495233,-201182,491337,318436,77539,22710,-212851,146520,-55929,-492726,142289,-65396,-377045,244510,-149675,-21056,64591,-33166,-377831,-383820,-28365,224518,-57315,377896,497751,162778,-369951,278812,118523,267310,-137435,-43568,305311,225538,120809,-9596,-335293,-150826,354157,382456,-157721,483818,-150415,422956,284555,335998,-266315,490656,254959,467794,414969,-446892,246675,247654,-173891,-199800,-140489,70394,242817,420796,-264741,-174322,-386235,-128144,-256257,468578,-497719,-252892,-254237,294006,-17779,141848,-499321,-402742,-454767,351308,-89749,-346722,-450283,148480,-301681,201394,-360423,-192012,-397837,-238778,312477,103016,-300009,394394,-328351,-153060,374715,192686,111077,-17328,47775,45058,-172439,41860,452547,474006,-255699,-104392,394663,393066,-186639,466668,283467,428990,198773,80672,-9425,354962,287929,371348,-52909,-198490,-199747,464840,131383,-50566,-180031,266044,-490213,-457074,-410171,-56848,-353281,318178,161737,227236,-23837,317622,-90419,64344,182919,-262902,8465,115660,-125333,-184354,-213995,-402752,-60465,-251022,445529,-110924,-329933,300230,39453,-264856,489943,46874,65377,313308,-93957,-296914,-245595,189328,244319,-308222,316201,228420,-45501,-334570,114669,468664,494183,-386710,-451215,-357524,-434101,419454,-433227,-3680,36911,-88302,374137,-344428,412435,197350,148925,-455480,327543,-36614,105921,-266180,-50853,-332146,112517,-355280,-4353,-191518,-33207,12196,421923,169782,468813,99544,399751,46730,359249,-281204,317675,362718,494165,-89664,-250161,-476750,126041,-433420,292339,-452730,20253,-2136,-237865,303578,-76831,137948,284155,474350,119461,-269040,464287,423810,146537,-349564,-175805,-229866,174957,-194568,-69913,276138,-477199,218604,16267,-406466,448501,-468384,-179793,-150126,-473095,16980,259091,452006,-422723,486216,-49289,187450,-353791,480252,16923,428174,-285307,11504,344959,340258,-218295,359012,-14301,193398,232525,381720,-397817,286282,431761,-265524,376043,-353762,-179179,-19392,190223,-82062,-261031,-212300,-373069,474118,-339491,415400,210199,196954,236833,-487332,208251,482414,47973,-286384,72031,267010,-201175,109636,439363,-212394,262509,258360,468519,-352278,35121,-102036,-488245,152382,269749,435488,255023,-253102,-253383,-408492,-99053,90342,296829,488264,118967,-246022,391681,-410500,362395,-225074,-282555,-207120,437759,-122974,-258743,278884,269283,-180874,-132595,222808,333383,363146,-220975,-284468,442667,-109090,241557,-285120,-171249,-354894,-95527,358772,-444045,366790,319197,72808,-434793,370906,61857,40220,444411,-300498,276965,-39088,183263,138178,-25623,-42108,494915,333142,391341,-44552,-117721,-455766,220145,443628,157387,-72194,-450443,-112736,58287,152338,448249,-229292,-16045,161702,131645,-242936,351991,447226,134465,76412,77787,410638,402501,39472,394111,-43038,-397623,246116,79203,403126,492877,300120,-310457,-291382,-148079,240588,-164629,343198,267093,319168,143951,-56462,-84071,382324,142323,30854,-63843,129832,267671,-76902,-480287,-400292,71931,313454,175333,45264,-134177,-43646,-219671,-13244,19267,474838,-74515,94392,-171737,-278294,76529,-18516,-146677,-222658,240885,-188384,-347537,73106,-321927,-195564,-209453,455974,298493,302152,177975,-140294,109377,177020,346907,-236466,-7483,120752,412991,420450,-117815,-233372,-102749,237430,165453,20824,-276409,-235190,132689,311116,-478869,259294,-154795,-60480,46351,99314,178969,-266316,-401933,-281210,-499619,-334616,-336553,283482,-217951,266972,276603,-345874,-274267,-386608,55839,-48510,-375767,109316,381379,279830,68397,-288904,-95001,-81942,-187855,-421012,-426741,-267586,-26891,-285408,-387089,490962,-322055,-168876,459027,373158,-377667,-170616,-67529,294266,-381887,-63620,-426085,77646,-116283,-434064,288383,90210,166537,-75868,335459,-165386,371341,-431016,369735,36298,-279215,309324,175019,414366,162773,-244928,-490801,-459214,-203239,-258636,477555,425670,-17763,56296,472791,473242,-379615,95068,41403,53550,25765,-163952,216031,-190590,483561,-93948,-169021,-187754,-80915,-134216,-357081,-496022,486641,299564,-498677,257918,110837,223392,173423,370066,67321,1940,-126509,-166426,407293,166856,295607,399994,24705,162172,-273061,282958,-107643,-314128,495679,22562,86793,100260,192547,282934,455757,9560,406343,-244662,-262447,-197556,-342869,377246,11157,-269504,-412785,364530,159257,-376652,22579,306822,59805,-137496,53463,237466,-262111,-394148,130939,496366,-268443,-316336,-294433,51074,-432343,-370172,-49277,-83434,-492243,-118728,19431,367594,495857,-202324,388619,-43458,173365,113184,275759,-383534,368825,272340,87123,6886,-54467,-128056,59895,124410,271553,-177092,193307,39630,425605,-130000,63359,239330,431241,-411612,252323,62454,-420467,314904,17415,-89782,-418543,-336436,239979,453726,-462891,-377088,-32305,-324558,407705,374260,-22669,329862,-235939,130344,89303,32858,-102495,-426404,289467,98478,-367771,359440,425247,25410,-51415,69124,338563,-211498,443821,75064,130471,-302486,246321,359020,329995,-286722,-382091,-78752,-95505,-86638,26553,-213036,-193005,-490138,453501,55752,-342665,433018,-408063,-126340,-413989,-364978,491589,256432,487679,-42718,45321,-339676,284643,502,-163635,292952,381511,116234,-340015,-326388,-351253,-475106,-130155,229376,144079,270130,-40423,260340,195443,-138426,-60707,68392,-347305,207386,251745,37148,166651,-369810,415461,-497072,412319,244290,299369,-359548,-15421,-453866,190701,363320,-407129,-176918,198065,-460500,-247157,286014,477749,-434272,-205329,-362478,73593,68500,-214509,-273050,196925,400776,-321609,225402,-413951,122044,-113189,-58034,-142459,238576,265087,203746,385417,-486364,442595,-225290,3469,439064,-372665,267594,-387759,-426932,-387093,-227682,-361643,-273472,-384049,-316110,153945,463924,-315469,-299642,-474339,-458584,-329321,-109798,-161631,-376868,-88261,107182,-411547,239120,-481953,-236798,59561,-115132,-321725,-420778,340653,367096,223719,-447766,-426063,-90900,-28213,10238,-20619,-429152,29359,414674,-281095,367124,-268013,-146458,-13891,358024,35639,432826,215489,444796,-445669,-7090,-263099,420848,146815,407778,462729,224996,-52829,208182,263885,360152,325191,-48694,-472623,-286580,-406741,14942,-219051,-32448,116943,-58318,-228199,-192972,-191245,478918,-389667,80360,209239,-56678,352161,-384868,-138309,199470,183845,-434864,-449633,44226,-370391,344324,134787,216854,166829,484408,346855,425450,-378319,72044,-465141,-393986,-7307,-79328,-90257,436882,166457,-497900,-424685,-356570,-314947,101064,-16201,157178,-340927,191868,-415781,-361970,-258171,-256592,-224129,-197662,-40375,225956,-248477,-249546,355469,-15080,-96441,-285366,87377,-224628,20011,-471458,-79275,-462016,363151,222130,-145767,-264012,241651,-485882,29917,420136,727,98202,-202719,-440612,-373189,-158546,-422235,-455280,-38433,58050,415529,491204,-496573,-284458,79149,369784,-193433,-278614,293169,141932,110219,-191554,-63307,157856,387503,-298606,435193,363412,-191533,303910,-66307,-68728,460215,-352518,-190911,451260,31899,240270,-358459,477104,-448769,-342494,408265,-487964,-490141,335606,21837,-463720,145415,-124790,224849,-313908,-447317,-461282,175125,-169280,-281265,447538,451993,133876,165555,49542,-166499,-235288,198295,-214886,41761,-175780,-86085,-221394,-451995,268752,377823,-336702,65705,-434172,-380413,228886,-269523,302584,159591,-246358,418929,-484180,-327093,-278850,-55243,492960,-20881,-68910,-179847,387284,5715,402214,-52163,348872,-195785,-285830,265345,-41668,-274661,199694,-322491,100528,-222209,-456926,438089,-364572,-200413,270838,234893,323352,203591,-120118,-206319,255692,-252501,69534,310357,-385664,-159345,-144334,-117351,-323468,-224013,-120954,-283555,-87768,-303209,102746,380193,-114020,-456133,-445138,123685,-343216,-173665,37634,-122263,48452,403779,294806,243245,-409352,39975,-446102,260081,108204,-448053,-194178,410357,-270496,434159,182738,-425415,-121644,-496749,-345754,271805,-153080,-320841,-156550,-101887,-72388,-271589,142286,-454715,52336,480767,174434,309385,-151388,42723,-154698,-434227,-169320,410759,54666,-35823,-146036,144619,492062,-218603,-385280,-76593,-6222,11033,-302732,259891,350022,61661,180008,-255657,-475430,40673,-429988,-149765,139246,-5339,-98608,77855,-128510,457513,499588,-39293,-445354,388525,234040,217959,324458,185265,-196628,115019,44542,-229579,-350624,265903,195154,-183751,-38380,244883,99558,-49987,-29752,170103,284538,-490111,124732,-77477,64014,260101,494832,-419777,-184094,-104055,154084,-320029,-185930,465805,454040,-210553,253450,235729,78220,-30997,24286,-449323,-365824,139599,-375502,-475623,-225484,494835,-215290,438877,176616,-453033,152282,66337,346844,-343749,403822,-401755,-422832,45855,81154,384233,338756,-64573,393430,-68819,-470664,-357465,-433302,-5071,27436,-402165,-278210,-163979,-283040,434095,-395566,-402503,-396908,459603,-484186,-334915,-459896,485687,9210,29953,232316,-199013,179790,204741,-180816,-281089,400226,-374007,-77404,196771,-432010,-215731,33048,-480057,-115062,73745,234828,236203,270110,176085,-115584,-394737,414642,-196647,-458636,449331,164998,-57891,-208408,-82153,230682,-23199,-105636,-68677,49838,-88859,-417840,-218913,-297982,119977,106756,455299,-318314,194157,131192,280807,-336342,3441,-335380,-23605,-480770,96885,348256,-348945,60626,-149639,361364,496851,-337818,-431619,-221624,148535,179322,202305,-499972,239003,-249586,-24827,-434704,214911,-405150,-128183,-285852,-392093,-289482,-113779,444440,-91385,-156790,355857,83724,-322069,166750,-336939,281792,-448753,-259854,413593,226356,168499,65862,-388963,467688,-137641,-212518,483425,456860,409787,-239634,81893,464336,-185953,-473150,-274327,144452,61507,-225770,-407443,408056,371239,-88086,-377551,30380,235979,-131330,291701,-275680,99375,-367342,-352199,-118508]
// let arr = [100,100,100]
// let arr = [40,10,20,30]

console.log(arrayRankTransform(arr));



/**
 * 确实是一道非常简单的题目。
 * 只是死脑筋钻进了一定要用循环计算位置的误区，没意识到相比于对于每个元素都遍历一遍计数的代价远高于直接排序然后使用下标。
 * 
 * 然后，试来试去就有了那么多超时的提交（目前最讨厌的错误）
 * 
 * 反思一下：在类似这种需要有序条件的数组，然后又需要计数的需求，应争取尽量使用数组有序的特性，将计数转化为下标。
 */
